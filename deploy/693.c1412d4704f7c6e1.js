"use strict";(self.webpackChunktp05_dubocage_julien=self.webpackChunktp05_dubocage_julien||[]).push([[693],{693:(U,d,c)=>{c.r(d),c.d(d,{CatalogueModule:()=>S});var u=c(6895),s=c(3074),g=c(4004),h=c(6610),t=c(8274),_=c(2340),m=c(529);let l=(()=>{class n{constructor(e){this.http=e,this.env=_.N}getProducts(){return this.http.get(this.env.apiBaseUrl+"/products")}getProduct(e){return this.http.get(this.env.apiBaseUrl+`/product/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(m.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=c(4318),p=c(4006);let y=(()=>{class n{constructor(){this.query="",this.search=new t.vpe,this.category=new t.vpe,this.reset=new t.vpe}clickSearch(){this.search.emit(this.query)}clickCategory(e){this.category.emit(e)}clickReset(){this.reset.emit()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-search"]],outputs:{search:"search",category:"category",reset:"reset"},decls:17,vars:1,consts:[[1,"input-group"],["type","text","placeholder","Rechercher...",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-btn"],["type","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-default","dropdown-toggle"],[1,"caret"],[1,"dropdown-menu","dropdown-menu-right"],[3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-search"],["type","button",1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-remove"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"input",1),t.NdJ("ngModelChange",function(i){return o.query=i}),t.qZA(),t.TgZ(2,"div",2)(3,"button",3),t._uU(4,"Cat\xe9gorie "),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"ul",5)(7,"li",6),t.NdJ("click",function(){return o.clickCategory("Livre")}),t.TgZ(8,"a"),t._uU(9,"Livre"),t.qZA()(),t.TgZ(10,"li",6),t.NdJ("click",function(){return o.clickCategory("Jeu")}),t.TgZ(11,"a"),t._uU(12,"Jeu"),t.qZA()()(),t.TgZ(13,"button",7),t.NdJ("click",function(){return o.clickSearch()}),t._UZ(14,"span",8),t.qZA(),t.TgZ(15,"button",9),t.NdJ("click",function(){return o.clickReset()}),t._UZ(16,"span",10),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngModel",o.query))},dependencies:[p.Fj,p.JJ,p.On]}),n})();const f=function(n){return["/catalogue/product/",n]};function Z(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"li",4)(1,"div",5)(2,"div",6)(3,"div",7),t._UZ(4,"img",8),t.qZA(),t.TgZ(5,"div",9)(6,"h4",10)(7,"a",11),t._uU(8),t.qZA()(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.qZA(),t.TgZ(13,"p"),t._uU(14),t.qZA(),t.TgZ(15,"button",12),t.NdJ("click",function(){const i=t.CHM(e).$implicit,P=t.oxw();return t.KtG(P.addProductToCart(i))}),t._UZ(16,"span",13),t._uU(17," Ajouter au panier "),t.qZA()()()()()}if(2&n){const e=a.$implicit;t.xp6(4),t.s9C("src",e.image,t.LSH),t.xp6(3),t.Q6J("routerLink",t.VKq(6,f,e.id)),t.xp6(1),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.hij("Cat\xe9gorie : ",e.category,""),t.xp6(2),t.hij("Prix : ",e.price," \u20ac")}}let v=(()=>{class n{constructor(e,o){this.catalogueService=e,this.store=o,this.products=[],this.category=""}ngOnInit(){this.resetSearch()}resetSearch(){this.catalogueService.getProducts().subscribe(e=>this.products=e)}addProductToCart(e){this.store.dispatch(new h.R(e))}onSearch(e){this.catalogueService.getProducts().pipe((0,g.U)(o=>o.filter(r=>r.name.toLowerCase().includes(e.toLowerCase()))),(0,g.U)(o=>o.filter(r=>!this.category||r.category===this.category))).subscribe(o=>this.products=o)}onCategoryChange(e){this.category=e}OnReset(){this.resetSearch()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l),t.Y36(C.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-catalogue"]],decls:6,vars:1,consts:[[1,"container"],[3,"reset","search","category"],[1,"media-list"],["class","media",4,"ngFor","ngForOf"],[1,"media"],[1,"panel","panel-default"],[1,"panel-body"],[1,"media-left"],["alt","...",1,"media-object",3,"src"],[1,"media-body"],[1,"media-heading"],[3,"routerLink"],["type","button",1,"btn","btn-default",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-shopping-cart"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Mon super catalogue"),t.qZA(),t.TgZ(3,"app-search",1),t.NdJ("reset",function(){return o.OnReset()})("search",function(i){return o.onSearch(i)})("category",function(i){return o.onCategoryChange(i)}),t.qZA(),t.TgZ(4,"ul",2),t.YNc(5,Z,18,8,"li",3),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("ngForOf",o.products))},dependencies:[u.sg,s.yS,y],styles:[".container[_ngcontent-%COMP%]{margin-bottom:2.5em}img[_ngcontent-%COMP%]{max-width:128px;max-height:128px}.media-list[_ngcontent-%COMP%]{margin-top:2em}.media-heading[_ngcontent-%COMP%]{font-weight:700}"]}),n})();function T(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"h3",4),t._uU(3),t.qZA()(),t.TgZ(4,"div",5)(5,"div",6),t._UZ(6,"img",7),t.qZA(),t.TgZ(7,"div",8)(8,"p"),t._uU(9),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.qZA(),t.TgZ(16,"button",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addProductToCart(r.product))}),t._UZ(17,"span",10),t._uU(18," Ajouter au panier "),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.product.name),t.xp6(3),t.s9C("src",e.product.image,t.LSH),t.xp6(3),t.Oqu(e.product.description),t.xp6(2),t.hij("Cat\xe9gorie : ",e.product.category,""),t.xp6(2),t.hij("Prix : ",e.product.price," \u20ac"),t.xp6(2),t.Oqu(e.product.summary)}}let b=(()=>{class n{constructor(e,o,r){this.route=e,this.catalogueService=o,this.store=r}ngOnInit(){this.catalogueService.getProduct(this.route.snapshot.params.id).subscribe(o=>this.product=o)}addProductToCart(e){this.store.dispatch(new h.R(e))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.gz),t.Y36(l),t.Y36(C.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-detail"]],decls:2,vars:1,consts:[[1,"container"],["class","panel panel-default",4,"ngIf"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-title"],[1,"panel-body"],[1,"media-left"],["alt","...",1,"media-object",3,"src"],[1,"media-body"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-shopping-cart"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,T,19,6,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.product))},dependencies:[u.O5],styles:["img[_ngcontent-%COMP%]{max-width:384px;max-height:384px}.panel-title[_ngcontent-%COMP%]{font-weight:700;font-size:large}.panel-body[_ngcontent-%COMP%]{font-size:medium}button[_ngcontent-%COMP%]{width:200px;height:35px}"]}),n})();var x=c(1325);const A=[{path:"",component:v},{path:"product/:id",component:b}];let S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[l,{provide:m.TP,useClass:x.O,multi:!0}],imports:[u.ez,s.Bz.forChild(A),p.u5]}),n})()}}]);