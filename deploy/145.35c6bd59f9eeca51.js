"use strict";(self.webpackChunkprojet_dubocage_julien=self.webpackChunkprojet_dubocage_julien||[]).push([[145],{6145:(nt,Z,a)=>{a.r(Z),a.d(Z,{CatalogueModule:()=>et});var g=a(6895),m=a(3074),f=a(4004),T=a(6610),t=a(8274),O=a(2340),x=a(529);let v=(()=>{class n{constructor(e){this.http=e,this.env=O.N}getProducts(){return this.http.get(this.env.apiBaseUrl+"/products")}getProduct(e){return this.http.get(this.env.apiBaseUrl+`/product/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(x.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var d=a(8423),A=a(740),U=a(8421),M=a(9751),E=a(5577),L=a(1144),u=a(576),b=a(3268);const F=["addListener","removeListener"],w=["addEventListener","removeEventListener"],j=["on","off"];function C(n,r,e,o){if((0,u.m)(e)&&(o=e,e=void 0),o)return C(n,r,e).pipe((0,b.Z)(o));const[i,c]=function Y(n){return(0,u.m)(n.addEventListener)&&(0,u.m)(n.removeEventListener)}(n)?w.map(s=>l=>n[s](r,l,e)):function J(n){return(0,u.m)(n.addListener)&&(0,u.m)(n.removeListener)}(n)?F.map(S(n,r)):function R(n){return(0,u.m)(n.on)&&(0,u.m)(n.off)}(n)?j.map(S(n,r)):[];if(!i&&(0,L.z)(n))return(0,E.z)(s=>C(s,r,e))((0,U.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new M.y(s=>{const l=(...h)=>s.next(1<h.length?h:h[0]);return i(l),()=>c(l)})}function S(n,r){return e=>o=>n[e](r,o)}var I=a(4408);const z=new(a(7565).v)(I.o);var G=a(4482),H=a(5403),D=a(1884),y=a(4006);const Q=["input"],K=["select"];let $=(()=>{class n{constructor(){this.search=new t.vpe,this.category=new t.vpe,this.reset=new t.vpe}ngAfterViewInit(){this.select.nativeElement.selectedIndex=-1,this.searchField$=C(this.input.nativeElement,"keyup"),this.searchField$.pipe((0,f.U)(e=>e.target.value),function N(n,r=z){return(0,G.e)((e,o)=>{let i=null,c=null,s=null;const l=()=>{if(i){i.unsubscribe(),i=null;const p=c;c=null,o.next(p)}};function h(){const p=s+n,P=r.now();if(P<p)return i=this.schedule(void 0,p-P),void o.add(i);l()}e.subscribe((0,H.x)(o,p=>{c=p,s=r.now(),i||(i=r.schedule(h,n),o.add(i))},()=>{l(),o.complete()},void 0,()=>{c=i=null}))})}(300),(0,D.x)()).subscribe(e=>this.search.emit(e))}changeCategory(e){this.category.emit(e)}clickReset(){this.input.nativeElement.value="",this.select.nativeElement.selectedIndex=-1,this.reset.emit()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-search"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Q,7),t.Gf(K,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.input=i.first),t.iGM(i=t.CRH())&&(o.select=i.first)}},outputs:{search:"search",category:"category",reset:"reset"},decls:13,vars:0,consts:[["id","search-container"],["id","category",1,"form-control",3,"change"],["select",""],["value","Livre"],["value","Jeu"],[1,"input-group"],["type","text","placeholder","Rechercher...",1,"form-control"],["input",""],[1,"input-group-btn"],["type","button",1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-remove"]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"select",1,2),t.NdJ("change",function(){t.CHM(i);const s=t.MAs(2);return t.KtG(o.changeCategory(s.value))}),t.TgZ(3,"option",3),t._uU(4,"Livre"),t.qZA(),t.TgZ(5,"option",4),t._uU(6,"Jeu"),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"input",6,7),t.TgZ(10,"div",8)(11,"button",9),t.NdJ("click",function(){return o.clickReset()}),t._UZ(12,"span",10),t.qZA()()()()}},dependencies:[y.YN,y.Kr],styles:["#category[_ngcontent-%COMP%]{max-width:8%;margin-right:10px}#search-container[_ngcontent-%COMP%]{display:flex}.input-group[_ngcontent-%COMP%]{width:100%}"]}),n})();const B=function(n){return["/catalogue/product/",n]};function X(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"li",5)(1,"div",6)(2,"div",7)(3,"div",8),t._UZ(4,"img",9),t.qZA(),t.TgZ(5,"div",10)(6,"h4",11)(7,"a",12),t._uU(8),t.qZA()(),t.TgZ(9,"p"),t._uU(10),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.qZA(),t.TgZ(13,"p"),t._uU(14),t.qZA(),t.TgZ(15,"button",13),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.addProductToCart(c))}),t._UZ(16,"span",14),t._uU(17," Ajouter au panier "),t.qZA()()()()()}if(2&n){const e=r.$implicit;t.xp6(4),t.s9C("src",e.image,t.LSH),t.xp6(3),t.Q6J("routerLink",t.VKq(6,B,e.id)),t.xp6(1),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.hij("Cat\xe9gorie : ",e.category,""),t.xp6(2),t.hij("Prix : ",e.price," \u20ac")}}let V=(()=>{class n{constructor(e,o,i){this.catalogueService=e,this.spinner=o,this.store=i,this.products=[],this.query="",this.category=""}ngOnInit(){this.resetSearch()}addProductToCart(e){this.store.dispatch(new T.R(e))}onSearch(e){this.query=e,this.handleSearch()}onCategoryChange(e){this.category=e,this.handleSearch()}handleSearch(){this.spinner.show(),this.catalogueService.getProducts().pipe((0,f.U)(e=>e.filter(o=>o.name.toLowerCase().includes(this.query.toLowerCase()))),(0,f.U)(e=>e.filter(o=>!this.category||o.category===this.category))).subscribe(e=>{this.products=e,this.spinner.hide()})}OnReset(){this.resetSearch()}resetSearch(){this.spinner.show(),this.category="",this.query="",this.catalogueService.getProducts().subscribe(e=>{this.products=e,this.spinner.hide()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(v),t.Y36(d.t2),t.Y36(A.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-catalogue"]],decls:7,vars:1,consts:[["type","ball-spin-clockwise-fade","color","#fff"],[1,"container"],[3,"reset","search","category"],[1,"media-list"],["class","media",4,"ngFor","ngForOf"],[1,"media"],[1,"panel","panel-default"],[1,"panel-body"],[1,"media-left"],["alt","...",1,"media-object",3,"src"],[1,"media-body"],[1,"media-heading"],[3,"routerLink"],["type","button",1,"btn","btn-default",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-shopping-cart"]],template:function(e,o){1&e&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1)(2,"h2"),t._uU(3,"Catalogue"),t.qZA(),t.TgZ(4,"app-search",2),t.NdJ("reset",function(){return o.OnReset()})("search",function(c){return o.onSearch(c)})("category",function(c){return o.onCategoryChange(c)}),t.qZA(),t.TgZ(5,"ul",3),t.YNc(6,X,18,8,"li",4),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("ngForOf",o.products))},dependencies:[g.sg,m.yS,d.Ro,$],styles:[".container[_ngcontent-%COMP%]{margin-bottom:2.5em}img[_ngcontent-%COMP%]{max-width:128px;max-height:128px}.media-list[_ngcontent-%COMP%]{margin-top:2em}.media-heading[_ngcontent-%COMP%]{font-weight:700}"]}),n})();function W(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h3",5),t._uU(3),t.qZA()(),t.TgZ(4,"div",6)(5,"div",7),t._UZ(6,"img",8),t.qZA(),t.TgZ(7,"div",9)(8,"p"),t._uU(9),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.qZA(),t.TgZ(14,"p"),t._uU(15),t.qZA(),t.TgZ(16,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addProductToCart(i.product))}),t._UZ(17,"span",11),t._uU(18," Ajouter au panier "),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.product.name),t.xp6(3),t.s9C("src",e.product.image,t.LSH),t.xp6(3),t.Oqu(e.product.description),t.xp6(2),t.hij("Cat\xe9gorie : ",e.product.category,""),t.xp6(2),t.hij("Prix : ",e.product.price," \u20ac"),t.xp6(2),t.Oqu(e.product.summary)}}let k=(()=>{class n{constructor(e,o,i,c){this.route=e,this.catalogueService=o,this.spinner=i,this.store=c}ngOnInit(){this.spinner.show(),this.catalogueService.getProduct(this.route.snapshot.params.id).subscribe(o=>{this.product=o,this.spinner.hide()})}addProductToCart(e){this.store.dispatch(new T.R(e))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(v),t.Y36(d.t2),t.Y36(A.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-product-detail"]],decls:3,vars:1,consts:[["type","ball-spin-clockwise-fade","color","#fff"],[1,"container"],["class","panel panel-default",4,"ngIf"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-title"],[1,"panel-body"],[1,"media-left"],["alt","...",1,"media-object",3,"src"],[1,"media-body"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"glyphicon","glyphicon-shopping-cart"]],template:function(e,o){1&e&&(t._UZ(0,"ngx-spinner",0),t.TgZ(1,"div",1),t.YNc(2,W,19,6,"div",2),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",o.product))},dependencies:[g.O5,d.Ro],styles:["img[_ngcontent-%COMP%]{max-width:384px;max-height:384px}.panel-title[_ngcontent-%COMP%]{font-weight:700;font-size:large}.panel-body[_ngcontent-%COMP%]{font-size:medium}button[_ngcontent-%COMP%]{width:200px;height:35px}"]}),n})();var _=a(1325);const tt=[{path:"",component:V},{path:"product/:id",component:k}];let et=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[v,{provide:x.TP,useClass:_.O,multi:!0}],imports:[g.ez,m.Bz.forChild(tt),y.u5,d.ef]}),n})()}}]);